#!/bin/sh

xrandr --dpi 96 --output VGA1 --auto --primary --output DP1 --auto --left-of VGA1 &
xset r rate 300 50 &
xset -q | grep "Caps Lock:\s*on" && xdotool key Caps_Lock &
xrdb "${XDG_CONFIG_HOME:-$HOME/.config}/x11/xresources" & xrdbpid=$!
# [ -f "$HOME/.local/share/bg" ] && command -v wal >/dev/null 2>&1 && wal -i "$HOME/.local/share/bg" >/dev/null 2>&1 &
[ -f "$HOME/.local/share/bg" ] && xwallpaper --zoom "$HOME/.local/share/bg" >/dev/null 2>&1 &
! pidof -s pulseaudio >/dev/null 2>&1 && setsid -f pulseaudio --start --exit-idle-time=-1 >/dev/null 2>&1 &

for p in dwmblocks dunst xcompmgr xbanish clipmenud mpd mpDris2; do
	command -v "$p" || continue
	pidof -s "$p" || setsid -f "$p"
done >/dev/null 2>&1

[ -n "$xrdbpid" ] && wait "$xrdbpid"
