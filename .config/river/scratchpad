#!/bin/sh

set -eu

tag="$1"
appid="scratchpad"
state="$(lswt -c af)"

echo "$state" | grep -Fq ",true" &&
	riverctl toggle-fullscreen

echo "$state" | grep -Fq "$appid," ||
	riverctl spawn "terminal -a $appid -w 840x560 && riverctl toggle-focused-tags $tag"

riverctl toggle-focused-tags "$tag"

wlrctl window waitfor "app_id:$appid" &&
	wlrctl window focus "app_id:$appid"
