#!/bin/sh

set -eu

MENUS_DIR="${MENUS_DIR:-${XDG_DATA_HOME:-$HOME/.local/share}/menus}"

menu="${1:-$(find -L "$MENUS_DIR" -type f -executable -printf "%P\n" | menu -p "menu> ")}" || exit 1
[ -x "$MENUS_DIR/$menu" ] || {
	echo "$(basename "$0"): invalid menu: $menu" >&2
	exit 1
}

[ $# -gt 0 ] && shift
exec "$MENUS_DIR/$menu" "$@"
