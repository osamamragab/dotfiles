#!/bin/sh

set -eu

export MENU_PROMPT="${MENU_PROMPT:-Menu}"

MENUS_DIR="${MENUS_DIR:-${XDG_DATA_HOME:-$HOME/.local/share}/menus}"

menu="${1:-$(
	printf "󰀻 Apps\n Input Handler\n Recent Files\n Clipboard History\n Notifications\n Bookmarks\n󰞅 Emojis\n Color Picker\n Passwords\n󰈷 Passwords OTP\n Screenshot\n󰻃 Screen Recording\n Power Profiles\n󰹑 Display Profiles\n System Actions" |
		menu slug
)}" || exit 1
[ $# -gt 0 ] && shift

[ -x "$MENUS_DIR/$menu" ] || {
	echo "$(basename "$0"): invalid menu: $menu" >&2
	exit 1
}

MENU_PROMPT="" exec "$MENUS_DIR/$menu" "$@"
