#!/bin/sh

run() {
	spt -n "notify-send" >/dev/null 2>&1 &
}

case "${1:-$(printf "toggle\nstart\nstop\nshow" | dmenu -i -p "$(basename "$0")")}" in
	start) pidof -s spt >/dev/null 2>&1 || run ;;
	stop) pkill -x spt ;;
	show) pkill -x -SIGUSR1 spt ;;
	toggle)
		# shellcheck disable=SC2015
		pidof -s spt >/dev/null 2>&1 && pkill -x -SIGUSR2 spt && pkill -x -SIGUSR1 spt || run
		;;
	*) notify-send -a "$(basename "$0")" "error" "invalid command $1"; exit 1 ;;
esac
