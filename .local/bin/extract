#!/bin/sh

if [ $# -eq 0 ]; then
	printf "usage: %s [archives]\n" "$(basename "$0")" >&2
	exit 1
fi

for ar in "$@"; do
	[ -r "$ar" ] || echo "$ar: file does not exists or not readable" >&2
	case "$ar" in
		*.tar.bz2|*.tbz2) tar -xvjf "$ar" ;;
		*.tar.gz|*.tgz) tar -xvzf "$ar" ;;
		*.tar.xz) tar -Jxvf "$ar" ;;
		*.tar) tar -xvf "$ar" ;;
		*.bz2) bunzip2 "$ar" ;;
		*.gz) gunzip "$ar" ;;
		*.xz) unxz "$ar" ;;
		*.lzma) unlzma "$ar" ;;
		*.zst) unzstd "$ar" ;;
		*.zip) unzip -d "$(echo "$ar" | sed 's/\(.*\)\.zip/\1/')" "$ar" ;;
		*.rar) unrar x -ad "$ar" ;;
		*.Z) uncompress "$ar" ;;
		*.7z) 7z x "$ar" ;;
		*) echo "$ar: unknown archive type" >&2 ;;
	esac
done
